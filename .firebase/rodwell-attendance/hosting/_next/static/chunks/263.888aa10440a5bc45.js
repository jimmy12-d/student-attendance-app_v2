"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{4263:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var l=s(5155),a=s(2115),i=s(198),n=s(9104),d=s(657),c=s(1063),r=s(9532);let o=e=>{let{students:t,attendanceRecords:s,selectedMonthValue:o,selectedMonthLabel:u,allClassConfigs:h,approvedPermissions:f}=e,[p,m]=(0,a.useState)([]),[g,x]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{if(!t||!s||!o){x(!1),m([]);return}x(!0);let[e,l]=o.split("-"),a=parseInt(e),i=parseInt(l)-1,{monthStartDateString:n,monthEndDateStringUsedForQuery:d}=(0,r.as)(a,i),c=[];t.forEach(e=>{let t=s.filter(t=>t.studentId===e.id&&t.date>=n&&t.date<=d),l=(0,r.zV)(e,t,o);l.count>=5&&c.push({id:e.id,fullName:e.fullName,class:e.class,shift:e.shift,warningType:"totalLate",value:l.count,details:l.details})}),m(c.sort((e,t)=>t.value-e.value).slice(0,5)),x(!1)},[t,s,o,u,h]),g)?(0,l.jsxs)("div",{className:"mb-6",children:[" ",(0,l.jsx)(i.A,{icon:c.d5P,title:"5+ Lates (".concat(u||"Selected Month",")")}),(0,l.jsx)("p",{className:"text-center p-4",children:"Calculating monthly lates..."})]}):(0,l.jsxs)("div",{className:"mb-6",children:[" ",(0,l.jsx)(i.A,{icon:c.d5P,title:"5+ Lates (".concat(u||"Selected Month",")")}),p.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map(e=>{let a=t.find(t=>t.id===e.id),i=s.filter(t=>t.studentId===e.id);return a?(0,l.jsx)(n.A,{warning:e,student:a,approvedPermissions:null!=f?f:[],allAttendanceRecordsForStudent:i,allClassConfigs:h},"".concat(e.id,"-totallate")):null})}):(0,l.jsxs)(d.A,{color:"info",icon:c.d5P,children:["No students with 5+ lates for ",u||"the selected period","."]})]})}}}]);