"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{5660:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var l=s(5155),n=s(2115),i=s(198),a=s(9104),d=s(657),c=s(1063),r=s(9532);let u=e=>{let{students:t,attendanceRecords:s,selectedMonthValue:u,selectedMonthLabel:o,allClassConfigs:h,approvedPermissions:f}=e,[p,g]=(0,n.useState)([]),[m,j]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{if(!t||!s||!u){j(!1),g([]);return}j(!0);let e=[],[l,n]=u.split("-"),i=parseInt(l),a=parseInt(n)-1,{monthStartDateString:d,monthEndDateStringUsedForQuery:c}=(0,r.as)(i,a);t.forEach(t=>{let l=s.filter(e=>e.studentId===t.id&&e.date>=d&&e.date<=c),n=f.filter(e=>e.studentId===t.id),i=(0,r.AK)(t,l,u,h,n);i.count>=5&&e.push({id:t.id,fullName:t.fullName,class:t.class,shift:t.shift,warningType:"totalAbsence",value:i.count,details:i.details})}),g(e.sort((e,t)=>t.value-e.value).slice(0,5)),j(!1)},[t,s,u,o]),m)?(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)(i.A,{icon:c.gtj,title:"5+ Absences This Month"}),(0,l.jsx)("p",{className:"text-center p-4",children:"Calculating monthly absences..."})]}):(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)(i.A,{icon:c.gtj,title:"5+ Absences (".concat(o||"Selected Month",")")}),p.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map(e=>{let n=s.filter(t=>t.studentId===e.id),i=t.find(t=>t.id===e.id);return i?(0,l.jsx)(a.A,{warning:e,student:i,approvedPermissions:f.filter(t=>t.studentId===e.id),allClassConfigs:h,allAttendanceRecordsForStudent:n},"".concat(e.id,"-consecutive")):null})}):(0,l.jsx)(d.A,{color:"info",icon:c.gtj,children:"No students with 5+ absences for the selected month."})]})}}}]);