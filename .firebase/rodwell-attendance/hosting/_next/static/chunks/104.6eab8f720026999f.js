"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{7738:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(5155);let l=e=>{let{type:t="justify-start",mb:a="-mb-3",noWrap:l=!1,children:n,className:r}=e;return(0,s.jsxs)("div",{className:"flex items-center ".concat(t," ").concat(r," ").concat(a," ").concat(l?"flex-nowrap":"flex-wrap"),children:[n," "]})}},1315:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(5155);a(2115);let l=e=>{let{title:t,children:a}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3 pl-4",children:[(0,s.jsx)("h1",{className:"text-2xl",children:t}),a]})}},6706:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(5155),l=a(1063),n=a(2079),r=a(7738),o=a(4713),i=a(1315),c=a(9912);let d=e=>{let{title:t,buttonColor:a,buttonLabel:d,isActive:x,children:u,modalClassName:m="w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12",onConfirm:h,onCancel:g}=e;if(!x)return null;let p=h&&d&&a?(0,s.jsxs)(r.A,{type:"justify-end",children:[(0,s.jsx)(n.A,{label:d,color:a,onClick:h,isGrouped:!0}),!!g&&(0,s.jsx)(n.A,{label:"Cancel",color:a,outline:!0,onClick:g,isGrouped:!0})]}):null;return(0,s.jsx)(c.A,{onClick:g,className:g?"cursor-pointer":"",children:(0,s.jsxs)(o.A,{className:"transition-transform shadow-lg max-h-modal ".concat(m," z-50"),isModal:!0,footer:p,children:[(0,s.jsx)(i.A,{title:t,children:!!g&&(0,s.jsx)(n.A,{icon:l.hyP,color:"whiteDark",onClick:g,small:!0,roundedFull:!0})}),(0,s.jsx)("div",{className:"space-y-3 pl-4",children:u})]})})}},9912:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(5155);function l(e){let{zIndex:t="z-50",type:a="flex",children:l,className:n,...r}=e;return(0,s.jsxs)("div",{className:"".concat(a," ").concat(t," ").concat(n," items-center flex-col justify-center overflow-hidden fixed inset-0"),children:[(0,s.jsx)("div",{className:"overlay absolute inset-0 bg-linear-to-tr opacity-90 dark:from-gray-700 dark:via-gray-900 dark:to-gray-700",onClick:e=>{e.preventDefault(),r.onClick&&r.onClick(e)}}),l]})}a(2115)},9104:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(5155),l=a(2115),n=a(4713),r=a(8574),o=a(9496),i=a(1063);let c=e=>{let{warning:t,student:a,allAttendanceRecordsForStudent:c,allClassConfigs:d,approvedPermissions:x}=e,[u,m]=(0,l.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"pb-2 pt-1 pl-2 last:mb-0",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-grow text-center sm:text-left overflow-hidden mb-4 sm:mb-0 sm:mr-3",children:[" ",(0,s.jsx)("h4",{className:"text-lg font-semibold truncate",children:t.fullName}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:["Class: ",t.class||"N/A"," ",t.shift||"N/A"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[" ",(0,s.jsx)("button",{type:"button",onClick:()=>{m(!0)},className:"p-1 rounded-full transition-all duration-200 ease-in-out text-red-600 dark:text-red-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75 hover:bg-red-500/20 dark:hover:bg-red-500/30 hover:shadow-md hover:shadow-red-400/30 dark:hover:shadow-md dark:hover:shadow-red-400/20",title:"View Attendance Details",children:(0,s.jsx)(r.A,{color:"totalLate"===t.warningType?"warning":"consecutiveAbsence"===t.warningType||"totalAbsence"===t.warningType?"danger":"info",label:t.details||"".concat(t.value),icon:i.WCY,className:"truncate pointer-events-none"})})]})]})}),u&&a&&d&&(0,s.jsx)(o.A,{student:a,attendanceRecords:c,approvedPermissions:x,allClassConfigs:d,isActive:u,onClose:()=>m(!1)})]})}},9496:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(5155),l=a(2115),n=a(7058),r=a(6706),o=a(9532),i=a(8449),c=a(2079),d=a(1063);let x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=e=>{let{student:t,attendanceRecords:a,allClassConfigs:u,approvedPermissions:m,isActive:h,onClose:g,initialMonthValue:p}=e,[f,b]=(0,l.useState)([]),[y,k]=(0,l.useState)(!0),[j,w]=(0,l.useState)(p||(0,i.AZ)()),N=e=>{let[a,s]=j.split("-"),l=parseInt(a),r=parseInt(s)-1;"prev"===e?--r<0&&(r=11,l--):++r>11&&(r=0,l++);let o=new Date(l,r,1),i=new Date;if(!(o>new Date(i.getFullYear(),i.getMonth(),1))){if(t.createdAt){let e=t.createdAt instanceof n.Dc?t.createdAt.toDate():t.createdAt;if(o<new Date(e.getFullYear(),e.getMonth(),1))return}w("".concat(l,"-").concat(String(r+1).padStart(2,"0")))}};(0,l.useEffect)(()=>{if(!h||!t||!u||!j){b([]),h&&k(!1);return}k(!0);let[e,s]=j.split("-"),l=parseInt(e),n=parseInt(s)-1,r=new Date;r.setHours(0,0,0,0);let i=new Map;a.filter(e=>{var t;return null===(t=e.date)||void 0===t?void 0:t.startsWith(j)}).forEach(e=>i.set(e.date,e));let c=new Date(l,n,1).getDay(),d=new Date(l,n+1,0).getDate(),x=[],g=[],p=1;for(let e=0;e<c;e++)g.push({dayOfMonth:null});for(;p<=d;){7===g.length&&(x.push(g),g=[]);let e=new Date(l,n,p);e.setHours(0,0,0,0);let a="".concat(l,"-").concat(String(n+1).padStart(2,"0"),"-").concat(String(p).padStart(2,"0")),s=i.get(a),c=(0,o.tE)(t,a,s,u,m),d={dayOfMonth:p,fullDateStr:a,isToday:e.getTime()===r.getTime(),isPast:e<r,status:c.status,time:c.time,isSchoolDayCell:!["Not Applicable (Holiday/Weekend)","Not Yet Enrolled","No School"].includes(c.status||"")};g.push(d),p++}for(;g.length>0&&g.length<7;)g.push({dayOfMonth:null});g.length>0&&x.push(g),b(x),k(!1)},[h,t,a,u,m,j]);let A=e=>{switch(e){case"Present":return"bg-green-200 text-green-800";case"Late":return"bg-yellow-200 text-yellow-800";case"Absent":return"bg-red-200 text-red-800";case"Permission":return"bg-purple-200 text-purple-800";case"Pending":return"bg-blue-100 text-blue-700";case"Absent (Config Missing)":return"bg-orange-100 text-orange-700";case"Not Applicable (Holiday/Weekend)":return"text-gray-400";case"Not Yet Enrolled":return"text-gray-400 dark:text-slate-500";case"Unknown":return"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200";default:return"text-transparent"}},v=(0,l.useMemo)(()=>{if(j){let[e,t]=j.split("-");if(e&&t)return new Date(parseInt(e),parseInt(t)-1,1).toLocaleString("default",{month:"long",year:"numeric"})}return"Details"},[j]),{isPrevDisabled:C,isNextDisabled:D}=(0,l.useMemo)(()=>{let e=new Date,a=e.getFullYear(),s=e.getMonth(),[l,r]=j.split("-").map(Number),o=r-1,i=!1;if(t.createdAt){let e=t.createdAt instanceof n.Dc?t.createdAt.toDate():t.createdAt,a=e.getFullYear(),s=e.getMonth();(l<a||l===a&&o<=s)&&(i=!0)}else l<a-2&&(i=!0);return{isPrevDisabled:i,isNextDisabled:l>a||l===a&&o>=s}},[j,t.createdAt]);return(0,s.jsxs)(r.A,{title:"Attendance: ".concat(t.fullName),isActive:h,onConfirm:g,buttonLabel:"Close",buttonColor:"info",modalClassName:"w-11/12 md:w-4/5 lg:w-3/5 xl:max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-4 flex justify-between items-center px-2 sm:px-4 py-2 border-b dark:border-slate-700",children:[(0,s.jsx)(c.A,{icon:d.LyG,onClick:()=>N("prev"),small:!0,outline:!0,color:"lightDark","aria-label":"Previous Month",disabled:C}),(0,s.jsx)("h3",{className:"text-md sm:text-lg font-semibold text-gray-700 dark:text-gray-200",children:v}),(0,s.jsx)(c.A,{icon:d.mI8,onClick:()=>N("next"),small:!0,outline:!0,color:"lightDark","aria-label":"Next Month",disabled:D})]}),y?(0,s.jsx)("p",{className:"p-4 text-center",children:"Loading details..."}):0===f.length?(0,s.jsx)("p",{className:"p-4 text-center",children:"No attendance details to display."}):(0,s.jsx)("div",{className:"text-sm p-1 md:p-2",children:(0,s.jsxs)("table",{className:"w-full table-fixed border-collapse text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:x.map(e=>(0,s.jsx)("th",{className:"py-2 px-1 border dark:border-slate-700 font-semibold text-xs text-center",children:e},e))})}),(0,s.jsx)("tbody",{children:f.map((e,t)=>(0,s.jsx)("tr",{children:e.map((e,t)=>(0,s.jsx)("td",{className:"py-1 px-1 border dark:border-slate-700 h-16 md:h-20 relative align-top text-left transition-colors duration-150 ease-in-out\n                      ".concat(e.isToday?"bg-sky-100 dark:bg-sky-700/60":!e.isSchoolDayCell&&e.dayOfMonth?"bg-gray-100 dark:bg-slate-800 opacity-70":e.dayOfMonth&&e.isPast?"bg-white dark:bg-slate-700/50":e.dayOfMonth&&!e.isPast?"bg-slate-50 dark:bg-slate-800/80":"bg-gray-50 dark:bg-slate-900"),children:e.dayOfMonth&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute top-1 left-1 text-s p-0.5 \n                            ".concat(e.isToday?"font-bold text-sky-600 dark:text-sky-200":e.isPast||e.status?"text-gray-800 dark:text-gray-100 font-medium":"text-gray-400 dark:text-slate-500"),children:e.dayOfMonth}),(0,s.jsxs)("div",{className:"absolute inset-0 top-5 md:top-6 flex flex-col items-center justify-start pt-1 px-0.5 text-center",children:[e.status&&["Present","Late","Absent","Pending","Permission","Absent (Config Missing)","Unknown"].includes(e.status)&&(0,s.jsx)("span",{className:"px-1.5 py-0.5 text-xs sm:text-xs rounded-full leading-tight whitespace-nowrap font-semibold ".concat(A(e.status)),children:"Absent (Config Missing)"===e.status?"Absent*":e.status}),("Present"===e.status||"Late"===e.status)&&e.time&&(0,s.jsx)("span",{className:"block text-xxs mt-0.5 pt-1 leading-tight ".concat(e.isToday?"text-sky-700 dark:text-sky-200":"text-gray-500 dark:text-gray-400"),children:e.time?"(".concat(e.time,")"):""}),("Not Applicable (Holiday/Weekend)"===e.status||"Not Yet Enrolled"===e.status)&&(0,s.jsx)("span",{className:"text-xxs leading-tight opacity-70 ".concat(A(e.status)," ").concat(e.isToday?"font-medium":""),children:"Not Applicable (Holiday/Weekend)"===e.status?"Non-School":"Not Enrolled"})]})]})},t))},t))})]})})]})}}}]);