"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{9243:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var i=t(5155),l=t(2115),n=t(198),c=t(9104),d=t(657),a=t(1063),r=t(9532);let u=e=>{let{students:s,attendanceRecords:t,allClassConfigs:u,approvedPermissions:o}=e,[f,v]=(0,l.useState)([]),[h,p]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{if(!s||!t||!u){p(!1),v([]);return}p(!0);let e=[];s.forEach(s=>{let i=t.filter(e=>e.studentId===s.id),l=o.filter(e=>e.studentId===s.id),n=(0,r.rM)(s,i,u,l,20);n.count>=2&&e.push({id:s.id,fullName:s.fullName,class:s.class,shift:s.shift,warningType:"consecutiveAbsence",value:n.count,details:n.details})}),v(e.sort((e,s)=>s.value-e.value).slice(0,5)),p(!1)},[s,t,u]),h||!u)?(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)(n.A,{icon:a.Xvy,title:"Recent Consecutive Absences (2+)"}),(0,i.jsx)("p",{className:"text-center p-4",children:"Calculating..."})]}):(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)(n.A,{icon:a.Xvy,title:"Recent Consecutive Absences (2+)"}),f.length>0?(0,i.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:f.map(e=>{let l=t.filter(s=>s.studentId===e.id),n=s.find(s=>s.id===e.id);return n?(0,i.jsx)(c.A,{warning:e,student:n,allClassConfigs:u,approvedPermissions:o.filter(s=>s.studentId===e.id),allAttendanceRecordsForStudent:l},"".concat(e.id,"-consecutive")):null})}):(0,i.jsx)(d.A,{color:"info",icon:a.Xvy,children:"No students with 2+ recent consecutive school day absences."})]})}}}]);